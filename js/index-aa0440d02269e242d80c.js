/*! xxxx */
!function(t){function e(n){if(i[n])return i[n].exports;var a=i[n]={exports:{},id:n,loaded:!1};return t[n].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i(7);var a=i(5),r=n(a),o=i(6),s=n(o),u=i(3),c=n(u);i(9);var h=new r.default("localGame","localCanvas"),l=new s.default("Major",h);h.addSprite(l);var f=new c.default("Enemy",h);h.addSprite(f),h.start()},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(8),s=n(o),u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,i=arguments[1];a(this,t),this.stopwatch=new s.default,this.timeWrap=i,this.duration=e}return r(t,[{key:"start",value:function(){this.stopwatch.start()}},{key:"stop",value:function(){this.stopwatch.stop()}},{key:"getRealElapsedTime",value:function(){return this.stopwatch.getElapsedTime()}},{key:"getElapsedTime",value:function(){var t=this.getRealElapsedTime(),e=(t/this.duration).toFixed(2);if(this.stopwatch.running)return void 0===this.timeWrap?t:t*(this.timeWarp(e)/e)}},{key:"isRunning",value:function(){return this.stopwatch.running}},{key:"isOver",value:function(){return this.getRealElapsedTime()>this.duration}},{key:"reset",value:function(){this.stopwatch.reset()}}]),t}();u.makeEaseOut=function(t){return function(e){return 1-Math.pow(1-e,2*t)}},u.makeEaseIn=function(t){return function(e){return Math.pow(e,2*t)}},u.makeEaseInOut=function(){return function(t){return t-Math.sin(2*t*Math.PI)/(2*Math.PI)}},u.makeElastic=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;return function(e){return(1-Math.cos(e*Math.PI*t))*(1-e)+e}},u.makeBounce=function(t){var e=u.makeElastic(t);return function(t){return t=e(t),t<=1?t:2-t}},u.makeLinear=function(){return function(t){return t}},e.default=u},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(e,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];i(this,t),this.left=0,this.top=0,this.width=10,this.height=10,this.velocityX=0,this.velocityY=0,this.visible=!0,this.animating=!1,this.name=e,this.painter=n,this.behaviors=a}return n(t,[{key:"paint",value:function(t){this.visible&&this.painter.paint(this,t)}},{key:"update",value:function(t,e){for(var i=this.behaviors.length;i>0;--i)this.behaviors[i-1].execute(this,t,e)}}]),t}();e.default=a},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=i(2),c=n(u),h=i(1),l=n(h),f=function(t){function e(t,i){a(this,e);var n={updateBallPosition:function(){s.top<i.height/3?s.velocityY=50:s.velocityY=.1,(s.left<s.radius||s.left>i.width-s.radius)&&(s.velocityX=-s.velocityX),s.left-=s.velocityX,s.top+=s.velocityY},execute:function(t,e){n.updateBallPosition()}},o={pushAnimationTimer:new l.default(500),start:function(){var t=o;t.pushAnimationTimer.start(),t.tempRadius=t.tempRadius||s.radius/2,t.startX=t.startX||s.left,t.startY=t.startY||s.top,t.color=s.color,t.distance=i.width},draw:function(t){var e=o;t.save(),t.beginPath(),t.fillStyle=e.color,t.arc(e.startX,e.startY,e.tempRadius+=30,0,2*Math.PI,!0),t.closePath(),t.fill(),t.restore()},execute:function(t,e,n){var a=o;a.pushAnimationTimer.isRunning()&&(a.draw(i.engine.context),a.tempRadius>a.distance&&(a.pushAnimationTimer.stop(),a.tempRadius=s.radius,i.backgroundColor=a.color,i.reset(1)))}},s=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i.gameName+t,{paint:function(t,e){t.visible&&e.drawImage(s.cacheCanvas,s.left-s.radius,s.top-s.radius)}},[n,o]));return s.left=i.width/2,s.top=0,s.radius=25,s.velocityX=(Math.floor(5*Math.random())+5)*(Math.random()>.5?1:-1),s.velocityY=.1,s.visible=!0,s.cacheCanvas=document.createElement("canvas"),s.cacheCtx=s.cacheCanvas.getContext("2d"),s.cacheCanvas.width=2*s.radius,s.cacheCanvas.height=2*s.radius,s.explosion=function(){o.start()},s.changeColor(),s.cache(),s}return o(e,t),s(e,[{key:"changeColor",value:function(){this.color="#"+Math.floor(16777215*Math.random()).toString(16)}},{key:"cache",value:function(){this.cacheCtx.save(),this.cacheCtx.fillStyle=this.color,this.cacheCtx.beginPath(),this.cacheCtx.arc(this.radius,this.radius,this.radius,0,2*Math.PI,!0),this.cacheCtx.closePath(),this.cacheCtx.fill(),this.cacheCtx.restore()}}]),e}(c.default);e.default=f},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(e){var n=this;i(this,t);var a=e;this.context=a.getContext("2d"),a.width=this.width=a.clientWidth,a.height=this.height=a.clientHeight,this.sprites=[],this.keyListeners=[],this.touchstartListeners=[],this.clickListeners=[],this.score=0,this.images={},this.imageUrls=[],this.imagesLoaded=0,this.imagesFailedToLoaded=9,this.imagesIndex=0,this.startTime=this.lastTime=this.gameTime=0,this.fps=0,this.STARTING_FPS=60,this.paused=!1,this.startedPauseAt=0,this.PAUSE_TIMEOUT=100,window.onkeydown=function(t){n.keyPressed(t)},a.addEventListener("click",function(){var t=!0,e=!1,i=void 0;try{for(var a,r=n.clickListeners[Symbol.iterator]();!(t=(a=r.next()).done);t=!0){var o=a.value;o()}}catch(t){e=!0,i=t}finally{try{!t&&r.return&&r.return()}finally{if(e)throw i}}}),a.addEventListener("touchstart",function(){var t=!0,e=!1,i=void 0;try{for(var a,r=n.touchstartListeners[Symbol.iterator]();!(t=(a=r.next()).done);t=!0){var o=a.value;o()}}catch(t){e=!0,i=t}finally{try{!t&&r.return&&r.return()}finally{if(e)throw i}}})}return n(t,[{key:"getImage",value:function(t){return this.images[t]}},{key:"loadImage",value:function(t){var e=this,i=new Image;i.onload=function(){e.imagesLoaded++},i.onerror=function(){e.imagesFailedToLoaded++},i.src=t,this.images[t]=i}},{key:"loadImages",value:function(){return this.imagesIndex<this.imageUrls.length&&(this.loadImage(this.imageUrls[this.imagesIndex]),this.imagesIndex++),100*((this.imagesLoaded+this.imagesFailedToLoaded)/this.imageUrls.length).toFixed(2)}},{key:"queueImage",value:function(t){this.imageUrls.push(t)}},{key:"start",value:function(){var t=this;this.startTime=+new Date,window.requestAnimationFrame(function(e){t.animate(e)})}},{key:"animate",value:function(t){var e=this;this.paused?setTimeout(function(){window.requestAnimationFrame(function(t){e.animate(t)})},this.PAUSE_TIMEOUT):(this.tick(t),this.clearScreen(),this.startAnimate(t),this.paintUnderSprites(),this.updateSprites(t),this.paintSprites(t),this.paintOverSprites(),this.endAnimate(),this.lastTime=t,window.requestAnimationFrame(function(t){e.animate(t)}))}},{key:"tick",value:function(t){this.updateFrameRate(t),this.gameTime=+new Date-this.startTime}},{key:"updateFrameRate",value:function(t){0===this.lastTime?this.fps=this.STARTING_FPS:this.fps=(1e3/(t-this.lastTime)).toFixed(0)}},{key:"clearScreen",value:function(){this.context.clearRect(0,0,this.width,this.height)}},{key:"updateSprites",value:function(t){var e=!0,i=!1,n=void 0;try{for(var a,r=this.sprites[Symbol.iterator]();!(e=(a=r.next()).done);e=!0){var o=a.value;o.update(this.context,t)}}catch(t){i=!0,n=t}finally{try{!e&&r.return&&r.return()}finally{if(i)throw n}}}},{key:"paintSprites",value:function(){var t=!0,e=!1,i=void 0;try{for(var n,a=this.sprites[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){var r=n.value;r.visible&&r.paint(this.context)}}catch(t){e=!0,i=t}finally{try{!t&&a.return&&a.return()}finally{if(e)throw i}}}},{key:"togglePaused",value:function(){var t=+new Date;this.paused=!this.paused,this.paused?this.startedPauseAt=t:(this.startTime=this.startTime+t-this.startedPauseAt,this.lastTime=t)}},{key:"pixelsPerFrame",value:function(t,e){return e/this.fps}},{key:"addKeyListener",value:function(t){this.keyListeners=this.keyListeners.concat(t)}},{key:"findKeyListener",value:function(t){for(var e=void 0,i=0;i<this.keyListeners.length;++i){var n=this.keyListeners[i],a=n.key;a===t&&(e=n.listener)}return e}},{key:"keyPressed",value:function(t){var e=void 0,i=void 0;switch(t.keyCode){case 32:i="space";break;case 68:i="d";break;case 75:i="k";break;case 83:i="s";break;case 80:i="p";break;case 37:i="left arrow";break;case 39:i="right arrow";break;case 38:i="up arrow";break;case 40:i="down arrow"}e=this.findKeyListener(i),e&&e()}},{key:"addSprite",value:function(t){this.sprites.push(t)}},{key:"getSprite",value:function(t){var e=!0,i=!1,n=void 0;try{for(var a,r=this.sprites[Symbol.iterator]();!(e=(a=r.next()).done);e=!0){var o=a.value;if(o.name===t)return o}}catch(t){i=!0,n=t}finally{try{!e&&r.return&&r.return()}finally{if(i)throw n}}return null}},{key:"startAnimate",value:function(t){}},{key:"paintUnderSprites",value:function(){}},{key:"paintOverSprites",value:function(){}},{key:"endAnimate",value:function(){}}]),t}();e.default=a},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(4),s=n(o),u=function(){function t(e,i){a(this,t),this.paused=!1,this.gameOver=!1,this.gameName=e,this.canvasId=i;var n=document.querySelector("#"+i);this.width=n.clientWidth,this.height=n.clientHeight,this.TRIANGLE_WIDTH=this.width/10,this.backgroundColor="#"+Math.floor(16777215*Math.random()).toString(16);var r=new s.default(n);this.engine=r}return r(t,[{key:"drawBackground",value:function(t){t.save(),t.fillStyle=this.backgroundColor,t.fillRect(0,0,this.width,this.height);for(var e=0;e<10;e++)t.fillStyle="#d3d3d3",t.beginPath(),t.moveTo(e*this.TRIANGLE_WIDTH,0),t.lineTo((e+.5)*this.TRIANGLE_WIDTH,.5*this.TRIANGLE_WIDTH),t.lineTo((e+1)*this.TRIANGLE_WIDTH,0),t.closePath(),t.fill(),t.beginPath(),t.moveTo(e*this.TRIANGLE_WIDTH,this.height),t.lineTo((e+.5)*this.TRIANGLE_WIDTH,this.height-.5*this.TRIANGLE_WIDTH),t.lineTo((e+1)*this.TRIANGLE_WIDTH,this.height),t.closePath(),t.fill();t.fillStyle="#000000",t.font="20px Georgia",t.fillText("score:"+this.engine.score,this.width-100,this.height/5),t.restore()}},{key:"isHit",value:function(){var t=this.engine;if(this.Major.visible){var e=Math.abs(this.Enemy.left-this.Major.left),i=this.Enemy.top-this.Major.top,n=this.Major.radius+this.Enemy.radius,a=Math.round(Math.sqrt(Math.pow(e,2)+Math.pow(i,2)));if(a<n){var r=void 0;e<n/4?(console.log("+5"),r=5):e<n/3?(console.log("+3"),r=3):e<n/2?(console.log("+2"),r=2):(console.log("+1"),r=1),t.score+=r,this.Major.shootSpeed=0,this.Enemy.velocityY=.1,this.Major.visible=!1,this.Enemy.visible=!1,this.Enemy.explosion()}}}},{key:"isHitWall",value:function(){var t=this.engine;if(this.Major.visible){var e=Math.round(this.TRIANGLE_WIDTH/2+this.Major.radius);(Math.round(this.Major.top)<e||Math.round(this.Major.top)>this.height-e)&&(this.Major.shootSpeed=0,this.Enemy.velocityY=.1,this.Major.visible=!1,this.Major.explosion(0),t.score=0)}}},{key:"addSprite",value:function(t){this.engine.addSprite(t)}},{key:"reset",value:function(t){0===t?(this.Enemy.visible=!1,this.gameOver=!0):(this.Enemy.left=this.width/2,this.Enemy.top=0,this.Enemy.velocityX=(Math.floor(5*Math.random())+5)*(Math.random()>.5?1:-1),this.Enemy.visible=!0,this.Enemy.changeColor(),this.Enemy.cache(),this.Major.left=this.width/2,this.Major.top=this.height/3*2,this.Major.shootSpeed=1,this.Major.changeColor(),this.Major.cache(),this.Major.visible=!0)}},{key:"start",value:function(){var t=this,e=this.engine,i=e.context;this.Major=e.getSprite(this.gameName+"Major"),this.Enemy=e.getSprite(this.gameName+"Enemy"),e.startAnimate=function(){t.isHit(),t.isHitWall(),e.paintSprites()},e.paintOverSprites=function(){t.gameOver&&(e.clearScreen(),i.font="20px Georgia",i.fillText("engine over!",10,t.height/10),i.fillText("press 'k' to restart",10,t.height/5),e.togglePaused())},e.paintUnderSprites=function(){t.drawBackground(t.engine.context)},e.addKeyListener([{key:"p",listener:function(){e.togglePaused()}},{key:"k",listener:function(){console.log("restart"),t.gameOver=!1,e.togglePaused(),t.reset(1),e.togglePaused()}},{key:"space",listener:function(){t.Major.shootSpeed=-15}}]),e.touchstartListeners.push(function(){t.Major.shootSpeed=-15}),e.start()}}]),t}();e.default=u},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=i(2),c=n(u),h=i(1),l=n(h),f=function(t){function e(t,i){a(this,e);var n={updateBallPosition:function(){s.velocityY=.1,s.left-=s.velocityX,s.top+=s.velocityY+s.shootSpeed},execute:function(t,e){n.updateBallPosition()}},o={explosions:[],state:null,pushAnimationTimer:new l.default(300),start:function(t){var e=o;e.state=t,e.pushAnimationTimer.start(),e.draw(i.engine.context,s.left,s.top)},draw:function(t,e,i){for(var n=void 0,a=function(a){var r={};r.velocityX=5*Math.random()+5,n=Math.random()<.5?1:-1,r.velocityX*=n,r.velocityY=5*Math.random()-2,r.x=e,r.y=i,r.draw=function(e,i){r.x+=e,r.y+=i,t.save(),t.beginPath(),t.fillStyle="#233333",t.arc(r.x,r.y,10,0,2*Math.PI,!0),t.closePath(),t.fill(),t.restore()},o.explosions.push(r)},r=0;r<10;r++)a(r)},execute:function(t,e,n){var a=o;if(a.pushAnimationTimer.isRunning()){for(var r=a.explosions.length;r>0;r--){var s=a.explosions[r-1];s.draw(s.velocityX,s.velocityY)}a.pushAnimationTimer.isOver()&&(a.pushAnimationTimer.stop(),a.explosions=[],i.reset(a.state))}}},s=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i.gameName+t,{paint:function(t,e){t.visible&&e.drawImage(s.cacheCanvas,s.left-s.radius,s.top-s.radius)}},[n,o]));return s.left=i.width/2,s.top=i.height/3*2,s.radius=20,s.velocityY=.1,s.visible=!0,s.shootSpeed=1,s.cacheCanvas=document.createElement("canvas"),s.cacheCtx=s.cacheCanvas.getContext("2d"),s.cacheCanvas.width=2*s.radius,s.cacheCanvas.height=2*s.radius,s.explosion=function(){o.start()},s.changeColor(),s.cache(),s}return o(e,t),s(e,[{key:"changeColor",value:function(){this.color="#"+Math.floor(16777215*Math.random()).toString(16)}},{key:"cache",value:function(){this.cacheCtx.save(),this.cacheCtx.fillStyle=this.color,this.cacheCtx.beginPath(),this.cacheCtx.arc(this.radius,this.radius,this.radius,0,2*Math.PI,!0),this.cacheCtx.closePath(),this.cacheCtx.fill(),this.cacheCtx.restore()}}]),e}(c.default);e.default=f},function(t,e){"use strict";window.requestNextAnimationFrame=function(){var t=void 0,e=void 0,i=0,n=navigator.userAgent,a=0,r=this;return window.webkitRequestAnimationFrame&&(e=function(t){void 0===t&&(t=+new Date),r.callback(t)},t=window.webkitRequestAnimationFrame,window.webkitRequestAnimationFrame=function(i,n){r.callback=i,t(e,n)}),window.mozRequestAnimationFrame&&(a=n.indexOf("rv:"),n.indexOf("Gecko")!==-1&&(i=n.substr(a+3,3),"2.0"===i&&(window.mozRequestAnimationFrame=void 0))),window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,e){var i,n;window.setTimeout(function(){i=+new Date,t(i),n=+new Date,r.timeout=1e3/60-(n-i)},r.timeout)}}()},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(){i(this,t),this.startTime=0,this.running=!1,this.elapsed=void 0}return n(t,[{key:"start",value:function(){this.startTime=+new Date,this.elapsedTime=void 0,this.running=!0}},{key:"stop",value:function(){this.elapsed=+new Date-this.startTime,this.running=!1}},{key:"getElapsedTime",value:function(){return this.running?+new Date-this.startTime:this.elapsed}},{key:"isRunning",value:function(){return this.running}},{key:"reset",value:function(){this.elapsed=0}}]),t}();e.default=a},function(t,e){}]);